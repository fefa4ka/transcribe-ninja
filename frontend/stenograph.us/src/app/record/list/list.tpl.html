<div class="records-upload" 
    ng-controller="RecordUploadCtrl">
    <a href class="btn btn-default" ng-click="upload()">
        <i class="fa fa-microphone fa-lg"></i> Загрузить запись</a>
    <input id="record-upload" type="file" accept="audio/*" nv-file-select="" uploader="uploader" />
    <span class="description"> – стенографируем записи. <strong>Быстро, конфиденциально.</strong></span>
</div>

<section class="records row-fluid">
    
    <section class="inprogress col-sm-4" ng-show="(records | filter : { order: '!0' }).length > 0">
        <h4>Загруженные</h4>

        <ul class="list-unstyled">
            <li ng-repeat="record in records | filter : { order: '!0' }" 
                ng-mouseenter="show = true" 
                ng-mouseleave="show = false" 
                ng-hide="record.trashed_at > 0">
                
                <h6>
                    {{ record.title }}
                    <nobr>
                        <small ng-hide="record.duration < 3600">{{ record.duration | humanSeconds }}</small><small>&nbsp;{{ record.duration / 3600 > 1 ? ((record.duration / 3600) - floor(record.duration/3600)) * 3600 : record.duration | humanSeconds }}</small>
                    </nobr>
                </h6>
                 <a class="btn btn-danger btn-xs pull-right" href 
                        ng-click="record = remove(record)"
                            ng-show="record.progress === 0 && show"><i class="fa fa-trash-o fa-lg"></i></a>
            
                    <button class="btn btn-default btn-xs" 
                            ng-click="order(record)">Распознать за {{ (record.duration / 60) * 15 | number: 0 }} ₽</button>

            </li>
        </ul>
    </section>
    <section class="inprogress col-sm-4" ng-show="(records | filter : { completed: '!100', order: '0' }).length > 0">
        <h4>В работе</h4>

        <ul class="list-unstyled">
            <li ng-repeat="record in records | filter : { completed: '!100', order: '0' }" 
                ng-mouseenter="show = true" 
                ng-mouseleave="show = false" 
                ng-hide="record.trashed_at > 0">
                
                <h6>
                    {{ record.title }}
                    <nobr>
                        <small ng-hide="record.duration < 3600">{{ record.duration | humanSeconds }}</small><small>&nbsp;{{ record.duration / 3600 > 1 ? ((record.duration / 3600) - floor(record.duration/3600)) * 3600 : record.duration | humanSeconds }}</small>
                    </nobr>
                </h6>
                <div class="progress">
                    <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="{{ record.completed }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ record.completed }}%">
                            <span class="sr-only"></span>
                            {{ record.duration * record.completed / 100 | secondsToDateTime | date: record.duration > 3600 ? 'HH:mm:ss' :'mm:ss' }}
                    </div>
                </div>


            </li>
        </ul>
    </section>
    <section class="finished col-sm-4" ng-show="(records | filter : { completed_percentage: '100' }).length > 0">
        <h4>Готовые записи</h4>
        <ul>
            <li ng-repeat="record in records | filter : { completed_percentage: '100' }">
                <a href="{{ record.url }}">{{ record.title }}</a>
                <span>{{ record.duration }}</span>
            </li>
        </ul>
    </section>
</section>
